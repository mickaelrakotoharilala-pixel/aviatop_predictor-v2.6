<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CRASH DEMO</title>
</head>

<style>
   :root{
    --bg:#071025;
    --card:#0f1724;
    --accent:#7c4dff;
    --danger:#ff4d4f;
    --ok:#22c55e;
    --muted:rgba(255,255,255,0.7);
   }
    *{box-sizing:border-box}
    body{
    margin:0;
    display:flex;
    align-items:center;
    font-family:Inter,system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    background:linear-gradient(180deg,var(--bg), #020617 90%);
    color:white;
    padding:10px;
    }
    h3 span{
    opacity: 0.7;
    font-family: bold;
    font-weight: 900;
    padding: 6px;
    font-size: 22px;
    color: red;
    display: grid;
    width: 420%;
    border-radius: 6px;
    height: 40px;
    background: #020617;
    }
    .wrap{
    width:100%;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:14px;
    padding:18px;
    display:grid;
    grid-template-columns: 320px 1fr;
    gap:16px;
    box-shadow: 0 20px 60px rgba(2,6,23,0.7);
    border:1px solid rgba(255,255,255,0.03);
    }

  /* panneau gauche: contrÃ´les */
    .panel{
    padding:14px;
    border-radius:10px;
    background:rgba(255,255,255,0.02);
    }
    .title{ 
    font-size:18px; 
    font-weight:700;
    margin:4px 0 10px 
    }
   .row{ 
    display:flex; 
    gap:8px;
    align-items:center; 
    margin-bottom:10px;
    }
    .case{
    display:flex; 
    align-items:center; 
    margin-bottom:10px;
    border-radius: 12px;;
    }
    label{ font-size:13px; color:var(--muted); min-width:100px }
    input[type="number"], input[type="text"]{
    background:transparent; border:1px solid rgba(255,255,255,0.06); color:white; padding:8px 10px; border-radius:8px; width:100%;
    }
    .big{
    font-size:18px; 
    font-weight:700; 
    color:#66BB6A;
    opacity: 0.7;
    border-radius:10px; 
    margin-left: 10%;
    }
    button{
    padding:10px 14px; border-radius:10px; border:0; cursor:pointer; font-weight:700;
    }
    .btn-start{ background: linear-gradient(90deg,var(--accent), #5aa8ff); margin:5px; color: white; box-shadow: 0 10px 30px rgba(124,77,255,0.12) }
    .btn-cash{ background: linear-gradient(90deg,var(--ok), #60d394);margin: 5px; color:#022; min-width:140px }
    .btn-disabled{ opacity:0.45;color: white; cursor:not-allowed }

    .small{ font-size:13px; color:var(--muted) }

    /* panneau droit: jeu & avion */
    .game{
    padding:14px;
    border-radius:10px;
    background:linear-gradient(180deg, rgba(0,0,0,0.2), rgba(255,255,255,0.01));
    display:flex; 
    flex-direction:column;
    gap:5px; 
    align-items:stretch;
    }
    .hud{
    display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .mult{
    margin: 54px;
    color: #66BB6A;
    text-align: center;
    font-size:40px; 
    font-weight:900; 
    letter-spacing:0.02em;
    }
    .status{
    font-size:12px; 
    color:var(--muted) }

    /* zone animation avion */
    h4{
    margin: -5px;
    padding: 8px;
    font-size: 16px;
    background: #FF8F00;
    height: 32px;
    text-align: center;
    }
    h5{
    margin: 5px;
    }
    .sky{
    height:200px;
    background: linear-gradient(180deg,#06213d 0%, #051428 100%);
    border-radius:12px;
    position:relative;
    overflow:hidden;
    border:1px solid rgba(255,255,255,0.03);
    }
   .small{
    font-size: 10px;
    }
    .plane{
    width:84px; 
    height:48px; 
    position:absolute; 
    left:0px; bottom:0px;
    transition: transform 2s ease, opacity .6s ease;
    transform-origin:center;
    font-size: 70px;
    display: inline-block;
    transform: rotate(-30deg);
    }
    .plane.taking-off{
    transform: translate(240px, -140px) rotate(-40deg) scale(0.95);
    transition: transform 40s cubic-bezier(.2,.9,.22,1);
    }
    .plane.crashed{
    transform: translate(220px, 35px) rotate(40deg) scale(1.05);
    opacity:0.18;
    }

    /* nuages / traces */
    .trail{
    position:absolute;
    left:70px;
    bottom:80px;
    margin: -80px;
    height:6px;
    width:0px; 
    background:linear-gradient(90deg, rgba(255,255,255,0.25), rgba(255,255,255,0.08));
    border-radius:4px; 
    transition: width 5.7s linear;
    }

    .meter {
    width: 80%;
    margin-left: 20%;
    height:8px; background:rgba(255,255,255,0.04);
    border-radius:6px;
    overflow:hidden;
    }
    .meter .fill { 
    height:100%;
    width:0%; 
    background:linear-gradient(90deg,var(--accent), #5aa8ff); 
    transition: width .3s linear;
    }

    .log{ 
    font-size:13px; 
    color:var(--muted); min-height:22px;
    }
    /* messages couleurs */
    .msg-ok{ 
    color:var(--ok);
    font-weight:700;
    }
    .msg-bust{ 
        color:var(--danger);
        font-weight:800;
    }

    /* footer instructions */
    .kbd{ 
        font-weight:700;
        background:rgba(255,255,255,0.03);
        padding:4px 6px; border-radius:6px;
        font-size:13px;
    }
    @media(max-width:880px){
    .wrap{ grid-template-columns: 1fr; }
    }
  
    .notification {
    position: fixed;
    bottom: 20px;
    right: 10px;
    background: white;
    border: 1px solid #ddd;
    padding: 15px 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    gap: 15px;
    animation:bounce 0.5s ease-in-out infinite;
    z-index: 9999;
    }
    .notification-text {
    flex: 1;
    }
    .notification-text h5 {
    margin: 0;
    font-size: 16px;
    color: black;
    }
    .notification-text z {
    margin: 3px 0 0;
    font-size: 14px;
    color: #555;
    }
    .notification-text span{
    color: red;
    opacity: 0.5;
    }
     @keyframes bounce {
    0%, 100% { transform: translateY(0);}
    50% {transform: translateY(-8px);}
</style>

<body>
    <div class="game" role="region" aria-label="Zone de jeu">
    <div class="case">
        <h3><span>CRASH</span></h3>

        <label></label>
    <div class="big" id="balance">5000.00</div>
        <h5>MGA</h5>
    </div>
    
    <div class="hud">
    <div>
</div>

    <div style="display:flex; justify-content:space-between; margin-top:8px;">
    </div>
</div>

    <div class="sky" id="sky">
        <h4>CRASH DEMO</h4>
    <div class="trail" id="trail" aria-hidden="true"></div>

    <div class="plane" id="plane">âœˆ</div>

<!-- crash visual (simple) -->
    <div id="crashMark" style="position:absolute; right:240px; top:100px; color:var(--danger); font-weight:900; font-size: 26px; display:none"></div>
    <div class="mult" id="multiplier">x1.00</div>
    <div class="status" id="status">PrÃªt</div>
    </div>

    <div style="display:flex; align-items:center; justify-content:space-between;">
    <div id="log" class="log">Appuie sur <span class="kbd">Demarrer</span> pour lancer une manche.</div>
    <div>
        
    <button id="resetBtn" class="small btn-disabled" style="background:transparent;border:1px solid rgba(255,255,255,0.04); color:var(--muted); border-radius:8px">Reset</button>
    </div>
</div>

    <div class="wrap" role="application" aria-label="Jeu Avion">
    <div class="panel" aria-hidden="false">
    <div class="title">ContrÃ´les</div>
    <div style="min-width:220px">
    <div class="meter" aria-hidden="true"><div id="meterFill" class="fill"></div></div>
    <div class="small">Mise: <span id="uiBet">10</span></div>
    <div class="small">Potentiel: <span id="potential">10.00</span></div>
    </div>

    <div class="row">
        <label for="bet">Mise</label>
        <input id="bet" placeholder="Ex: 500 MGA" type="number" min="1" step="1" value="" />
    </div>

    <div class="row">
        <label for="autoCash">Auto-cashout</label>
        <input id="autoCash" placeholder="Ex: 2.21" type="number" min="1.1" step="0.1" value="" />
    </div>

    <div class="row">
        <label for="autoPlay">Auto-play</label>
        <input id="autoPlay" type="checkbox" />
        <span class="small" style="margin-left:auto">Auto start next round</span>
    </div>

    <div style="display:flex; gap:8px; margin-top:10px;">
    <button id="startBtn" class="btn-start">DÃ©marrer</button>
    <button id="cashBtn" class="btn-cash btn-disabled" disabled>Cash Out</button>
    </div>

    <div style="margin-top:12px;">
    <div class="small">Dernier rÃ©sultat :</div>
    <div id="lastResult" class="log">â€”</div>
    </div>
</div>

<!-- Notification (cachÃ©e par dÃ©faut) -->
    <div class="notification" id="downloadNotification">ðŸ“ž
    <div class="notification-text">
        <h5>Pour plus d'info <span>whats up:</span></h5>
        <z>+261347105558</z>
    </div>
</div>
</div>

    <script>

const balanceEl = document.getElementById('balance');
const betInput = document.getElementById('bet');
const autoCashInput = document.getElementById('autoCash');
const startBtn = document.getElementById('startBtn');
const cashBtn = document.getElementById('cashBtn');
const multiplierEl = document.getElementById('multiplier');
const statusEl = document.getElementById('status');
const uiBet = document.getElementById('uiBet');
const potentialEl = document.getElementById('potential');
const meterFill = document.getElementById('meterFill');
const plane = document.getElementById('plane');
const trail = document.getElementById('trail');
const lastResult = document.getElementById('lastResult');
const autoPlayCheckbox = document.getElementById('autoPlay');
const crashMark = document.getElementById('crashMark');

let balance = 5000.00;
let currentBet = 10;
let gameRunning = false;
let multiplier = 1.0;
let rafId = null;
let round = 0;
let cashedOut = false;
let currentPayout = 0;
let waitingForMultiplier = false;
let multiplierStartedAt = 0;
let crashAtTime = 0;
let autoCash = parseFloat(autoCashInput.value) || null;
let autoPlay = false;

function format(n){ return Number(n).toFixed(2); }
function setBalance(v){ balance = Math.max(0, Number(v)); balanceEl.textContent = format(balance); }
setBalance(balance);
uiBet.textContent = betInput.value;
potentialEl.textContent = format(Number(betInput.value)*1.00);

function updateUI(){
  uiBet.textContent = betInput.value;
  potentialEl.textContent = format(Number(betInput.value) * (parseFloat(multiplier).toFixed(2) || 1));
  document.getElementById('uiBet').textContent = betInput.value;
}

betInput.addEventListener('input', ()=> { updateUI() });
autoCashInput.addEventListener('input', ()=> { autoCash = parseFloat(autoCashInput.value) || null; });

startBtn.addEventListener('click', startRound);
cashBtn.addEventListener('click', cashOut);

document.getElementById('resetBtn').addEventListener('click', ()=>{
  setBalance(5000);
  lastResult.textContent = 'Remis Ã  zÃ©ro.';
});

document.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter'){ startRound(); }
  if(e.code === 'Space'){ e.preventDefault(); cashOut(); }
  if(e.key === 'ArrowUp'){ betInput.value = Math.max(1, Number(betInput.value) + 1); updateUI(); }
  if(e.key === 'ArrowDown'){ betInput.value = Math.max(1, Number(betInput.value) - 1); updateUI(); }
});

function startRound(){
  if(gameRunning || waitingForMultiplier) return;
  currentBet = Number(betInput.value) || 0;
  if(currentBet <= 0){ alert('Mise invalide'); return; }
  if(currentBet > balance){ alert('Balance insuffisante'); return; }

  // prepare round
  round++;
  cashedOut = false;
  multiplier = 1.0;
  currentPayout = 0;
  setBalance(+(balance - currentBet));
  statusEl.textContent = 'DÃ©collage...';
  multiplierEl.textContent = `x${multiplier.toFixed(2)}`;
  lastResult.textContent = `Manche #${round} â€” avion dÃ©collÃ©. Multiplicateur dÃ©marre dans 5s.`;
  meterFill.style.width = '0%';
  crashMark.style.display = 'none';

  // show plane takeoff animation
  plane.classList.remove('crashed');
  void plane.offsetWidth;
  plane.classList.add('taking-off');
  trail.style.width = '0px';
  setTimeout(()=> { trail.style.width = '180px'; }, 120);

  // after plane takes off we wait 5s before multiplier begins
  waitingForMultiplier = true;
  gameRunning = false;
  startBtn.classList.add('btn-disabled');
  startBtn.disabled = true;
  cashBtn.classList.add('btn-disabled'); cashBtn.disabled = true;

  let countdown = 5;
  let countdownInterval = setInterval(()=> {
    statusEl.textContent = `DÃ©marrage du multiplicateur dans ${countdown}s`;
    countdown--;
    if(countdown < 0){
      clearInterval(countdownInterval);
      waitingForMultiplier = false;
      beginMultiplier();
    }
  }, 1000);
}

/* dÃ©marre la boucle qui augmente le multiplicateur */
function beginMultiplier(){
  if(gameRunning) return;
  gameRunning = true;
  multiplierStartedAt = performance.now();
  // crash time en secondes aprÃ¨s le dÃ©but du multiplicateur (alÃ©atoire)
  // min 1.1s -> max 12s (ajuste si tu veux)
  const crashSeconds = (Math.random() * 10.5) + 1.1;
  crashAtTime = multiplierStartedAt + crashSeconds * 1000;

  // croissance : on utilisera une exponentielle contrÃ´lÃ©e
  // multiplier(t) = 1 + (e^(rate * t) - 1) * scale
  const rate = 0.6; // vitesse de montÃ©e
  const scale = 1.2;

  statusEl.textContent = 'En vol â€” multiplicateur en cours';
  startBtn.classList.add('btn-disabled');
  startBtn.disabled = true;
  cashBtn.classList.remove('btn-disabled'); cashBtn.disabled = false;

  // animation loop
  function loop(now){
    const elapsed = (now - multiplierStartedAt) / 6000; // sec
    // expo growth for ressenti similaire Ã  Aviator
    multiplier = Math.max(1.0, 1 + (Math.exp(rate * elapsed) - 1) * scale);
    // clamp display
    if(!isFinite(multiplier) || multiplier > 1000) multiplier = 1000;

    multiplierEl.textContent = `x${multiplier.toFixed(2)}`;

    // meter fill - relative to potential of crashSeconds / 12s (visuel)
    let fillPct = Math.min(100, ((now - multiplierStartedAt) / (12*1000)) * 100);
    meterFill.style.width = fillPct + '%';

    // auto cashout check
    if(!cashedOut && autoCash && multiplier >= autoCash){
      cashOut(true);
      // don't return here, allow instant cashout to stop before bust
    }

    // crash check
    if(now >= crashAtTime){
      // bust: plane crash
      gameRunning = false;
      cashedOut = false;
      cancelAnimationFrame(rafId);
      rafId = null;
      onBust();
      return;
    }

    // continue loop
    rafId = requestAnimationFrame(loop);
  }

  rafId = requestAnimationFrame(loop);
}

/* cash out function */
function cashOut(isAuto=false){
  if(!gameRunning) return;
  if(cashedOut) return;
  cashedOut = true;
  gameRunning = false;
  cancelAnimationFrame(rafId);
  rafId = null;

  // calculate payout (truncate to 2 decimals)
  const payout = Math.max(0, +(currentBet * multiplier).toFixed(2));
  currentPayout = payout;
  setBalance(+(balance + payout)); // ajoute payout Ã  la balance
  multiplierEl.textContent = `x${multiplier.toFixed(2)}`;
  statusEl.innerHTML = `<span class="msg-ok">CASHOUT x${multiplier.toFixed(2)}</span>`;
  lastResult.textContent = `GagnÃ© ${format(payout)} (mise ${format(currentBet)}) â€” round #${round}`;
  cashBtn.classList.add('btn-disabled'); cashBtn.disabled = true;

  // plane stays in air then slowly reset
  plane.classList.remove('taking-off');
  setTimeout(()=> { plane.style.opacity = '1'; }, 200);

  // auto-play
  if(autoPlayCheckbox.checked){
    setTimeout(()=> {
      // reset plane visuals and start next round
      plane.classList.remove('crashed');
      plane.style.opacity = '';
      startBtn.disabled = false;
      startBtn.classList.remove('btn-disabled');
      startRound();
    }, 1200);
  } else {
    startBtn.disabled = false;
    startBtn.classList.remove('btn-disabled');
  }
}

/* bust (crash) handler */
function onBust(){
  multiplierEl.textContent = `x${multiplier.toFixed(2)}`;
  statusEl.innerHTML = `<span class="msg-bust">ðŸ’¥Crash</span>`;
  lastResult.textContent = `Perdu ${format(currentBet)} (mise) â€” round #${round}`;
  crashMark.style.display = 'block';
  plane.classList.remove('taking-off');
  plane.classList.add('crashed');

  // cash button disabled
  cashBtn.classList.add('btn-disabled'); cashBtn.disabled = true;

  // auto-play restart?
  if(autoPlayCheckbox.checked){
    setTimeout(()=> {
      // small reset visual
      plane.classList.remove('crashed');
      crashMark.style.display = 'none';
      startBtn.disabled = false;
      startBtn.classList.remove('btn-disabled');
      startRound();
    }, 1800);
  } else {
    startBtn.disabled = false;
    startBtn.classList.remove('btn-disabled');
  }
}

/* util */
function format(n){ return Number(n).toFixed(2); }
function setBalance(v){ balance = Number(v); balanceEl.textContent = format(balance); }
function updateBetUI(){ uiBet.textContent = betInput.value; potentialEl.textContent = format(Number(betInput.value) * Number(multiplier || 1).toFixed(2)); }
betInput.addEventListener('change', updateBetUI);

/* initial UI */
updateUI();
setBalance(balance);

    </script>
</body>
</html>
